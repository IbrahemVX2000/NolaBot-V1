const json = [
{
    Qname: "ما هو اسم الأميرة التي نامت لمدة 100 عام في قصة النوم الجميل؟",
    Qanswer: "أورورا"
},
{
    Qname: "ما هو اسم السنجاب في فيلم ديزني الشهير الذي يبحث عن الجوز؟",
    Qanswer: "بطوط"
},
{
    Qname: "ما هو الحيوان الذي يمكن أن يتغير لونه بالكامل؟",
    Qanswer: "الحرباء"
},
{
    Qname: "ما هي الفاكهة التي يُطلق عليها اسم التفاح الصيفي؟",
    Qanswer: "الخوخ"
},
{
    Qname: "ما هو الفرق بين الفراولة والتوت؟",
    Qanswer: "حجم الثمرة"
},
{
    Qname: "ما هو الحيوان الذي يعتبر أسرع حيوان على وجه الأرض؟",
    Qanswer: "الفهد"
},
{
    Qname: "ما هو الشيء الذي يُلقب بـ الفاكهة الرابعة بجانب البرتقال والتفاح والموز؟",
    Qanswer: "العنب"
},
{
    Qname: "ما هو الطائر الذي يُعرف بأنه ملك الطيور؟",
    Qanswer: "صقر الشاهين"
},
{
    Qname: "ما هو الشيء الذي يزداد كبيراً كلما قلَّصنا منه؟",
    Qanswer: "الحفرة"
},
{
    Qname: "ما هو الشيء الذي لا يمكن رؤيته إلا عندما ترمي به، ويختفي عندما تلتقطه؟",
    Qanswer: "الظل"
},
{
    Qname: "ما هو الشهر الذي يحتفل فيه المسلمون بعيد الفطر؟",
    Qanswer: "شوال"
},
{
    Qname: "من هو الصاحبي المعروف بقلب سيد الشهداء؟",
    Qanswer: "حمزة بن عبد المطلب"
},
{
    Qname: "ما هي السورة التي تعد قلب القرآن؟",
    Qanswer: "البقرة"
},
{
    Qname: "من هو الخليفة الرابع في الإسلام؟",
    Qanswer: "علي بن ابي طالب"
},
{
    Qname: "ما هي السورة التي تُقرأ في كل ركعة من صلاة الوتر؟",
    Qanswer: "سورة الكافرون"
},
{
    Qname: "ما هو اسم أم النبي محمد صلى الله عليه وسلم؟",
    Qanswer: "امنة بنت وهب"
},
{
    Qname: "من هو أول نبي ورسول في الإسلام؟",
    Qanswer: "نبي الله آدم"
},
{
    Qname: "من هو نبي الله الذي بنى سفينة لإنقاذه وأتباعه من طوفان عذاب الله؟",
    Qanswer: "نبي الله نوح"
},
{
    Qname: "من النبي الذي لقب بالساحر في التاريخ الى ان قام الاسلام بتبرئته؟",
    Qanswer: "نبي الله سليمان"
},
{
    Qname: "احد الكتب السماوية وليس القرآن ولا الانجيل او التوراة؟",
    Qanswer: "الزبور"
},
{
    Qname: "كم عدد الملوك الذين حكموا الارض؟",
    Qanswer: "4"
},
{
    Qname: "في سورة الكهف, لما قتل العبد الصالح الغلام؟",
    Qanswer: "خوفا على والديه"
},
{
    Qname: "كم كذبة كذب النبي ابراهيم؟",
    Qanswer: "3"
},
{
    Qname: "كم عدد الانبياء المذكورين بالقرآن؟",
    Qanswer: "25"
},
{
    Qname: "من الذي قام باحتجاز يأجوج و مأجوج في الوادي؟",
    Qanswer: "ذو القرنين"
},
{
    Qname: "من هو ذبيح الله؟",
    Qanswer: "نبي الله اسماعيل"
},
{
    Qname: "ما هي السورة التي تسمى عروس القرآن؟",
    Qanswer: "سورة الرحمن"
},
{
    Qname: "اعظم سورة في القرآن؟",
    Qanswer: "الفاتحة"
},
{
    Qname: "ما اسم الانفجار الذي يظهر عند موت النجوم؟",
    Qanswer: "المستعر الاعظم"
},
{
    Qname: "ما سبب ظاهرة المد والجزر؟",
    Qanswer: "القمر"
},
{
    Qname: "ما اسم حالة المادة الرابعة؟",
    Qanswer: "البلازما"
},
{
    Qname: "مالاسم العلمي للنجوم الطارقة؟",
    Qanswer: "النجوم النيترونية"
},
{
    Qname: "هل اسرائيل موجودة؟",
    Qanswer: "لا"
},
{
    Qname: "ما حكم العلاقات الشاذة عند المسلمين؟",
    Qanswer: "القتل"
},
{
    Qname: "ما اسم ابطئ حيوان على وجه الارض؟",
    Qanswer: "الكسلان"
},
{
    Qname: "ما حكم رد السلام على من يسلم؟",
    Qanswer: "فرض"
},
{
    Qname: "ما ثالث الحرمين؟",
    Qanswer: "المسجد الاقصى"
},
{
    Qname: "في انمي ون بيس, ما الاسم الحقيقي للحية البيضاء؟",
    Qanswer: "ادوارد"
},
{
    Qname: "في انمي هجوم العمالقة, ما اسم ملك الاسوار؟",
    Qanswer: "باستور نيك"
},
{
    Qname: "كم عدد قتلى الحرب العالمية الاولى؟",
    Qanswer: "100 مليون"
},
{
    Qname: "ما اسم القنبلة  النووية التي سقطت على هيروشيما؟",
    Qanswer: "الولد الصغير"
},
{
    Qname: "ما اسم الدكتاتوري الاعظم في التاريخ؟",
    Qanswer: "ادلوف هتلر"
},
{
    Qname: "ما اطول حرب في التاريخ البشري؟",
    Qanswer: "حرب البسوس"
},
{
    Qname: "هل تريد الموت؟",
    Qanswer: "اكيد"
},
{
    Qname: "صليت عالنبي؟",
    Qanswer: "اكيد"
},
{
    Qname: "حمدت الله لو تنتظر تعطس؟",
    Qanswer: "حمدته"
}
]; 


let a;
let q;
const _3Sec = 3000;
let i = 0;

const onLoad = () => {
    if (!global.hasOwnProperty("onquestions")) global.onquestions = {};
}

const onCall = async ({ message, getLang, data }) => {
    const { senderID, threadID } = message;
const { Users } = global.controllers;
  const getUsersInfo=await Users.getInfo(message.senderID);
  const userName = getUsersInfo.name;
  const userGender = getUsersInfo.gender;
  let gender;
  if (userGender == "MALE") {gender = "قام"} else { gender = "قامت"}
    if (senderID == global.botID) return;
    if (!global.questions.hasOwnProperty(threadID) && !global.questions[threadID]) return;

    if (!global.onquestions.hasOwnProperty(message.threadID)) global.onquestions[threadID] = {};
    if (!global.onquestions[threadID].hasOwnProperty(senderID)) global.onquestions[threadID][senderID] = 0;

    if (global.onquestions[threadID][senderID] + _3Sec > Date.now()) return;
    global.onquestions[threadID][senderID] = Date.now();

    if (message.body === "ابدا" || message.body === "ابدأ" || message.body === "أبدا"){
        const Qdata = json[Math.floor(Math.random() * json.length)];
        q = Qdata.Qname;
        a = Qdata.Qanswer;
        message.reply({ body:`${q}`});
    } else {
        let x = 0;
    }

    if (message.body == a) {
        delete global.questions[message.threadID];
        message.react("✔");
        message.reply(`☜ ${gender} ${userName} بكتابة الاجابة الصحيحة`);
        return;
    } else {
        i++;
    }

    if (i == 10) {
        message.reply(`لقد خسرت^^\nالاجابة الصحيحة هي: ${a}`);
        delete global.questions[message.threadID];
        return;
    }
}

export default {
    onLoad,
    onCall
}